<script setup>
import {marked} from "marked";
import {EventsOn} from "../../wailsjs/runtime/runtime.js";
import Sidebar from "../App.vue";
const text=ref([])
EventsOn("onData",(data)=>{
  //如果字符串为%$%开头则
  if(data.startsWith("%$%")){
    text.value.push({title:data.substring(3),content:""})
  }
  //如果为空则不打印
  else if (data!=="") {
    //读取response字段
    text.value[text.value.length-1].content+=data
  }
})
</script>

<template>
<div class="Box">
<div class="Box2">
  <div v-for="item in text">
    <div class="Title">
      <img src="../assets/images/img7.png" height="28" width="28" style="border-radius: 99px"/>
      <span>{{item.title}}</span>
    </div>
    <div class="Content">
      <div class="Notfi">
        <span>CHAT A.I +</span>
        <img src="./../assets/images/arrow-up-left-contained.svg" alt="">
      </div>
      <div  v-html="marked(item.content)"></div>
      <div class="folder">
        <div class="Bot">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M12.1398 3.86586C12.3701 2.75332 11.6543 1.6213 10.6162 1.26697C10.0991 1.0777 9.56156 1.12319 9.12302 1.27394C8.68652 1.42399 8.25661 1.7096 7.98381 2.11789L7.98276 2.11946L6.03276 5.02067C5.95551 4.90146 5.86247 4.7892 5.75096 4.68627C5.26922 4.24159 4.62458 4.14376 4.03491 4.14376H3.28491C2.69524 4.14376 2.0506 4.24159 1.56886 4.68627C1.07054 5.14625 0.941162 5.79243 0.941162 6.41251V13.7625C0.941162 14.3826 1.07054 15.0288 1.56886 15.4887C2.0506 15.9334 2.69524 16.0313 3.28491 16.0313H4.03491C4.62458 16.0313 5.26922 15.9334 5.75096 15.4887C5.86192 15.3863 5.95459 15.2747 6.03161 15.1561L7.38397 16.2031C7.67867 16.4752 8.06077 16.626 8.35925 16.7113C8.69411 16.8069 9.05331 16.8562 9.3598 16.8562H12.2098C12.862 16.8562 13.502 16.616 14.0112 16.2434C14.5127 15.8764 14.9446 15.3381 15.1199 14.6748L16.9083 9.23525C17.1743 8.48049 17.0846 7.69792 16.6391 7.09323C16.1953 6.49098 15.4756 6.16874 14.6848 6.16874H11.78L12.1398 3.86586ZM6.37866 13.2907L8.45132 14.8953L8.49361 14.9281L8.53142 14.9659L8.53143 14.9659C8.53243 14.9666 8.61338 15.0289 8.82285 15.0887C9.013 15.143 9.21629 15.1687 9.3598 15.1687H12.2098C12.4576 15.1687 12.7551 15.0715 13.0147 14.8816C13.2737 14.692 13.4358 14.4545 13.4912 14.2328L13.4987 14.2031L13.5083 14.174L15.3083 8.69897L15.3116 8.68879L15.3152 8.6787C15.4194 8.38686 15.3578 8.19911 15.2805 8.09425C15.1993 7.984 15.019 7.85624 14.6848 7.85624H11.6848C10.736 7.85624 9.94985 7.04091 10.0995 5.99316L10.1011 5.98222L10.1012 5.98223L10.4762 3.58223L10.4803 3.55568L10.4861 3.52945C10.5356 3.30668 10.3628 2.9612 10.068 2.86294L10.0532 2.858L10.0385 2.85252C9.96019 2.82314 9.82885 2.81573 9.67159 2.86979C9.50864 2.9258 9.41409 3.01465 9.38684 3.05552L9.38508 3.05817L6.37866 7.53112V13.2907ZM2.62866 6.41251C2.62866 6.20512 2.65154 6.07798 2.67512 6.00441C2.68627 5.96961 2.69653 5.95013 2.70234 5.94064C2.70774 5.93182 2.71134 5.92821 2.71346 5.92625C2.71922 5.92093 2.82458 5.83126 3.28491 5.83126H4.03491C4.49524 5.83126 4.6006 5.92093 4.60636 5.92625C4.60848 5.92821 4.61209 5.93182 4.61749 5.94064C4.62329 5.95013 4.63355 5.96961 4.6447 6.00441C4.66829 6.07798 4.69116 6.20512 4.69116 6.41251V13.7625C4.69116 13.9699 4.66829 14.097 4.6447 14.1706C4.63355 14.2054 4.62329 14.2249 4.61749 14.2344C4.61209 14.2432 4.60848 14.2468 4.60636 14.2488C4.6006 14.2541 4.49524 14.3438 4.03491 14.3438H3.28491C2.82458 14.3438 2.71922 14.2541 2.71346 14.2488C2.71134 14.2468 2.70774 14.2432 2.70234 14.2344C2.69653 14.2249 2.68627 14.2054 2.67512 14.1706C2.65154 14.097 2.62866 13.9699 2.62866 13.7625V6.41251Z" fill="#5661F6"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="2" height="14" viewBox="0 0 2 14" fill="none">
            <path d="M1 0L1 14" stroke="black" stroke-opacity="0.44"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M5.79008 1.14371C5.13784 1.14371 4.49786 1.38398 3.98871 1.75653C3.48718 2.1235 3.05524 2.6618 2.87993 3.3251L1.09158 8.76468C0.825572 9.51944 0.915244 10.302 1.36081 10.9067C1.80457 11.509 2.5243 11.8312 3.31508 11.8312H6.21988L5.86005 14.1341C5.62978 15.2466 6.34557 16.3786 7.38363 16.733C7.90075 16.9222 8.43832 16.8768 8.87686 16.726C9.31338 16.576 9.74331 16.2903 10.0161 15.882L10.0171 15.8805L11.9672 12.9791C12.0445 13.0984 12.1376 13.2107 12.2491 13.3137C12.7309 13.7584 13.3755 13.8562 13.9652 13.8562H14.7152C15.3048 13.8562 15.9495 13.7584 16.4312 13.3137C16.9295 12.8537 17.0589 12.2075 17.0589 11.5875V4.23746C17.0589 3.61739 16.9295 2.97121 16.4312 2.51122C15.9495 2.06654 15.3048 1.96871 14.7152 1.96871H13.9652C13.3755 1.96871 12.7309 2.06654 12.2491 2.51122C12.1381 2.61368 12.0454 2.72537 11.9684 2.84395L10.6159 1.79684C10.3212 1.52475 9.9391 1.37395 9.64062 1.28867C9.30577 1.193 8.94656 1.14371 8.64008 1.14371H5.79008ZM11.6214 4.70944L9.54855 3.10463L9.50627 3.07189L9.46845 3.03408L9.46844 3.03407C9.46735 3.03323 9.38637 2.97105 9.17703 2.91124C8.98688 2.85691 8.78359 2.83121 8.64008 2.83121H5.79008C5.54231 2.83121 5.2448 2.92844 4.98519 3.11839C4.7262 3.3079 4.56405 3.54543 4.50863 3.7671L4.5012 3.79685L4.49162 3.82598L2.69162 9.30098L2.68827 9.31115L2.68467 9.32124C2.58044 9.61308 2.64207 9.80083 2.71934 9.90569C2.80058 10.0159 2.98085 10.1437 3.31508 10.1437H6.31508C7.26384 10.1437 8.05002 10.959 7.90035 12.0068L7.89878 12.0177L7.89871 12.0177L7.52371 14.4177L7.51956 14.4443L7.51373 14.4705C7.46423 14.6933 7.6371 15.0387 7.93189 15.137L7.94671 15.1419L7.96134 15.1474C8.03968 15.1768 8.17102 15.1842 8.32829 15.1302C8.49123 15.0741 8.58579 14.9853 8.61303 14.9444L8.6148 14.9418L11.6214 10.4685V4.70944ZM13.3089 4.23746C13.3089 4.03008 13.3318 3.90294 13.3554 3.82936C13.3665 3.79456 13.3768 3.77509 13.3826 3.7656C13.388 3.75677 13.3916 3.75316 13.3937 3.7512C13.3995 3.74588 13.5048 3.65621 13.9652 3.65621H14.7152C15.1755 3.65621 15.2809 3.74588 15.2866 3.7512C15.2888 3.75316 15.2924 3.75677 15.2978 3.7656C15.3036 3.77509 15.3138 3.79456 15.325 3.82936C15.3486 3.90294 15.3714 4.03008 15.3714 4.23746V11.5875C15.3714 11.7948 15.3486 11.922 15.325 11.9956C15.3138 12.0304 15.3036 12.0498 15.2978 12.0593C15.2924 12.0682 15.2888 12.0718 15.2866 12.0737C15.2809 12.079 15.1755 12.1687 14.7152 12.1687H13.9652C13.5049 12.1687 13.3995 12.079 13.3937 12.0737C13.3916 12.0718 13.388 12.0682 13.3826 12.0593C13.3768 12.0498 13.3665 12.0304 13.3554 11.9956C13.3318 11.922 13.3089 11.7948 13.3089 11.5875V4.23746Z" fill="black" fill-opacity="0.44"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="2" height="14" viewBox="0 0 2 14" fill="none">
            <path d="M1 0L1 14" stroke="black" stroke-opacity="0.44"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.7435 6.25647C10.9172 5.43019 9.72072 5.15622 8.325 5.15622H6.84377C6.84631 3.93916 7.09658 3.30288 7.44975 2.94972C7.80472 2.59474 8.44572 2.34372 9.675 2.34372H12.825C14.0543 2.34372 14.6953 2.59474 15.0503 2.94972C15.4052 3.30469 15.6562 3.94569 15.6562 5.17497V8.32497C15.6562 9.55425 15.4052 10.1952 15.0503 10.5502C14.6971 10.9034 14.0608 11.1537 12.8437 11.1562V9.67497C12.8437 8.27925 12.5698 7.08275 11.7435 6.25647ZM12.8437 12.8437C14.2314 12.8413 15.4209 12.566 16.2435 11.7435C17.0698 10.9172 17.3437 9.72069 17.3437 8.32497V5.17497C17.3437 3.77925 17.0698 2.58275 16.2435 1.75647C15.4172 0.930196 14.2207 0.656219 12.825 0.656219H9.675C8.27928 0.656219 7.08278 0.930196 6.2565 1.75647C5.43392 2.57905 5.15871 3.76855 5.15627 5.15624C3.76857 5.15868 2.57908 5.43389 1.7565 6.25647C0.930226 7.08275 0.65625 8.27925 0.65625 9.67497V12.825C0.65625 14.2207 0.930226 15.4172 1.7565 16.2435C2.58278 17.0697 3.77928 17.3437 5.175 17.3437H8.325C9.72072 17.3437 10.9172 17.0697 11.7435 16.2435C12.5661 15.4209 12.8413 14.2314 12.8437 12.8437ZM6 6.84372L5.175 6.84372C3.94572 6.84372 3.30472 7.09474 2.94975 7.44972C2.59477 7.80469 2.34375 8.44569 2.34375 9.67497V12.825C2.34375 14.0542 2.59477 14.6952 2.94975 15.0502C3.30472 15.4052 3.94572 15.6562 5.175 15.6562H8.325C9.55428 15.6562 10.1953 15.4052 10.5503 15.0502C10.9052 14.6952 11.1562 14.0542 11.1562 12.825V12V9.67497C11.1562 8.44569 10.9052 7.80469 10.5503 7.44971C10.1953 7.09474 9.55428 6.84372 8.325 6.84372H6Z" fill="black" fill-opacity="0.44"/>
          </svg>
        </div>
      </div>
      <p v-show="item.content.length>10" class="partition"/>
    </div>
  </div>
</div>
</div>
</template>

<style scoped lang="scss">
.Box{
  width: 100%;
  padding: 50px 14%;

  .Box2{
    width: 100%;
    height: 100%;
    overflow-y: scroll;
    padding: 0 0 150px 0;
  }
}
.output{
  color: black;
}
.Title{
  display: flex;
  gap: 8px;
  &>span{
    color: rgba(0, 0, 0, 0.80);
    font-size: 16px;
    font-style: normal;
    font-weight: 500;
  }
}
.Notfi{
  color: #5661F6;
  font-size: 14px;
  font-style: italic;
  font-weight: 500;
  line-height: normal;
  display: flex;
  gap: 4px;
}
.Content{
  margin-top: 20px;
  padding: 0 36px;
  .folder{
    margin-top: 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .Bot{
    display: flex;
    background: rgba(255, 255, 255, 0.54);
    padding: 8px 12px;
    align-items: flex-start;
    gap: 10px;
    border-radius: 20px;
  }

}
.partition{
  margin-bottom: 30px;
  margin-top: 30px;
  border: 0.5px solid rgba(0, 0, 0, 0.1);
}
</style>